<div class="col-md-12 row">
    <div class="pull-left">
      {{#bs-form-element label="Alias"}}
        {{input type='text' value=(mut mapping.alias) class='form-control'}}
      {{/bs-form-element}}
    </div>
    <div class="pull-right">
      {{bs-button icon='glyphicon glyphicon-remove' type='danger'
                  defaultText='Delete mapping'
                  action=(route-action 'removeMapping' mapping)}}
    </div>
</div>

<div class="col-md-12 row">
    <hr>
</div>

<div class="col-md-12">
    <h3>Users</h3>
    <div class="table-responsive">
        <table class="table table-striped table-bordered">
            <thead>
            <th>#Id</th>
            <th>Username</th>
            <th>Remove from mapping</th>
            </thead>
            <tbody>
            {{#each mapping.users as |user|}}
                <tr>
                    <td>
                      {{#link-to 'profile' user.id}}
                        {{user.id}}
                      {{/link-to}}
                    </td>
                    <td>{{user.username}}</td>
                    <td>
                      {{bs-button size='xs' icon='glyphicon glyphicon-remove' type='danger'
                                  defaultText='Remove' action=(action 'removeUser' user)}}
                    </td>
                </tr>
            {{/each}}
            </tbody>
        </table>
    </div>
    <div class="pulled-down-row">
        <div class="col-md-3">
          {{user-picker selected=newUser onChange=(action (mut newUser))}}
        </div>
        <div class="col-md-3">
          {{bs-button size='sm' type="primary" action="addUser" defaultText='Add user'}}
        </div>
    </div>
</div>

<div class="col-md-12 row">
    <hr>
</div>

<div class="col-md-12">
    <h3>Groups</h3>
    <div class="table-responsive">
        <table class="table table-striped table-bordered">
            <thead>
            <th>#Id</th>
            <th>Name</th>
            <th>Remove from mapping</th>
            </thead>
            <tbody>
            {{#each mapping.groups as |group|}}
                <tr>
                    <td>
                      {{#link-to 'group' group.id}}
                        {{group.id}}
                      {{/link-to}}
                    </td>
                    <td>{{group.name}}</td>
                    <td>
                      {{bs-button size='xs' icon='glyphicon glyphicon-remove' type='danger'
                                  defaultText='Remove' action=(action 'removeGroup' group)}}
                    </td>
                </tr>
            {{/each}}
            </tbody>
        </table>
    </div>
    <div>
        <div class="col-md-6">
          {{#bs-form-element label='Group name'}}
              <div class="input-group">
                {{#power-select-typeahead search=(action 'searchGroup')
                                          selected=newGroup.name
                                          placeholder="Start typing a group's name"
                                          onchange=(action (mut newGroup)) as |groupInfo|}}
                  {{groupInfo.name}}
                {{/power-select-typeahead}}
                  <span class="input-group-btn">
                    {{bs-button size='sm' type="primary" action="addGroup" defaultText='Add group'}}
                  </span>
              </div>
          {{/bs-form-element}}
        </div>
    </div>
</div>

<div class="col-md-12 row">
    <hr>
</div>

<div class="col-md-12">
    <h3>Credentials</h3>
    <div class="table-responsive">
        <table class="table table-striped table-bordered">
            <thead>
            <th>#Id</th>
            <th>Type</th>
            <th>Alias</th>
            <th>Remove from mapping</th>
            </thead>
            <tbody>
            {{#each mapping.credentials as |cred|}}
                <tr>
                    <td>
                      {{link-to-credential credential=cred text=cred.id}}
                    </td>
                    <td>{{cred.type}}</td>
                    <td>{{cred.alias}}</td>
                    <td>
                      {{bs-button size='xs' icon='glyphicon glyphicon-remove' type='danger'
                                  defaultText='Remove' action=(action 'removeCredential' cred)}}
                    </td>
                </tr>
            {{/each}}
            </tbody>
        </table>
    </div>
    <div class="pulled-down-row">
        <div class="col-md-3">
          {{#bs-form-element label="Credential Id"}}
            {{input type='number' value=(mut newCredential) class='form_control'}}
          {{/bs-form-element}}
        </div>
        <div class="col-md-3">
          {{bs-button size='sm' type="primary" action="addCredential"
                      defaultText='Add credential'}}
        </div>
    </div>
</div>

<div class="col-md-12 row">
    <hr>
</div>

<div class="col-md-12">
    <h3>Doors</h3>
    <div class="table-responsive">
        <table class="table table-striped table-bordered">
            <thead>
            <th>#Id</th>
            <th>Alias</th>
            <th>Remove from mapping</th>
            </thead>
            <tbody>
            {{#each mapping.doors as |door|}}
                <tr>
                    <td>
                      {{#link-to 'door' door.id}}
                        {{door.id}}
                      {{/link-to}}
                    </td>
                    <td>{{door.alias}}</td>
                    <td>
                      {{bs-button size='xs' icon='glyphicon glyphicon-remove' type='danger'
                                  defaultText='Remove' action=(action 'removeDoor' door)}}
                    </td>
                </tr>
            {{/each}}
            </tbody>
        </table>
    </div>

    <div>
        <div class="col-md-6">
          {{#bs-form-element label='Door alias'}}
              <div class="input-group">
                {{#power-select-typeahead search=(action 'searchDoor')
                                          selected=newDoor.alias
                                          placeholder="Start typing a door's alias"
                                          onchange=(action (mut newDoor)) as |doorInfo|}}
                  {{doorInfo.alias}}
                {{/power-select-typeahead}}
                  <span class="input-group-btn">
                    {{bs-button size='sm' type="primary" action="addDoor" defaultText='Add door'}}
                  </span>
              </div>
          {{/bs-form-element}}
        </div>
    </div>
</div>
