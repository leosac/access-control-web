<BsForm @formLayout="horizontal" @model={{this.args.mapping}} as |form|>
    <div class="row">
        <div class="col-md-6">
            <form.element @controlType="text" @label={{t "alias"}} @value={{this.args.mapping.alias}} />
        </div>
        <div class="col-md-4"></div>
        <div class="col-md-2 text-right">
            <BsButton @icon='glyphicon glyphicon-remove' @type='danger'
                        @defaultText={{t 'delete'}}
                        @onClick={{fn this.args.removeMapping this.args.mapping}} />
        </div>
    </div>

    <div class="col-md-12">
        <h3>{{t 'users.title'}}</h3>
        <div class="table-responsive">
            <table class="table table-hover table-bordered">
                <thead>
                    <tr>
                        <th class="col-md-1">#Id</th>
                        <th class="col-md-6">{{t 'username'}}</th>
                        <th>{{t 'schedule.remove_from_mapping'}}</th>
                    </tr>
                </thead>
                <tbody>
                {{#each this.args.mapping.users as |user|}}
                    <tr>
                        <td>
                            <LinkTo @route='profile' @model={{user.id}}>{{user.id}}</LinkTo>
                        </td>
                        <td>
                            <LinkTo @route='profile' @model={{user.id}}>{{user.username}}</LinkTo>
                        </td>
                        <td>
                            <div class="pull-right">
                                <BsButton @size='xs' @icon='glyphicon glyphicon-remove' @type='danger'
                                            @defaultText={{t 'remove'}} @onClick={{fn this.removeUser user}} />
                            </div>
                        </td>
                    </tr>
                {{/each}}
                </tbody>
            </table>
        </div>
        <div class="row">
            <div class="pull-left col-md-4">
                <form.element @label={{t "table.user_name"}}>
                    <PowerSelect @searchEnabled={{true}} @search={{this.searchUser}} @selected={{this.newUser}} @placeholder={{t "users.type_user"}} @onChange={{fn (mut this.newUser)}} as |userInfo|>
                        {{userInfo.username}}
                    </PowerSelect>
                </form.element>
            </div>
            <div class="col-md-2">
                <BsButton @size='sm' @type="primary" @onClick={{fn this.addUser}} @defaultText={{t 'users.add_user'}} />
            </div>
        </div>
    </div>

    <div class="col-md-12">
        <h3>{{t 'groups'}}</h3>
        <div class="table-responsive">
            <table class="table table-hover table-bordered">
                <thead>
                    <tr>
                        <th class="col-md-1">#Id</th>
                        <th class="col-md-6">{{t 'name'}}</th>
                        <th>{{t 'schedule.remove_from_mapping'}}</th>
                    </tr>
                </thead>
                <tbody>
                {{#each this.args.mapping.groups as |group|}}
                    <tr>
                        <td>
                            <LinkTo @route='group' @model={{group.id}}>{{group.id}}</LinkTo>
                        </td>
                        <td>
                            <LinkTo @route='group' @model={{group.id}}>{{group.name}}</LinkTo>
                        </td>
                        <td>
                            <div class="pull-right">
                                <BsButton @size='xs' @icon='glyphicon glyphicon-remove' @type='danger'
                                            @defaultText={{t 'remove'}} @onClick={{fn this.removeGroup group}} />
                            </div>
                        </td>
                    </tr>
                {{/each}}
                </tbody>
            </table>
        </div>

        <div>
            <div class="row">
                <div class="pull-left col-md-4">
                    <form.element @label={{t "table.group_name"}}>
                        <PowerSelect @searchEnabled={{true}} @search={{this.searchGroup}} @selected={{this.newGroup}} @placeholder={{t "users.type_group"}} @onChange={{fn (mut this.newGroup)}} as |groupInfo|>
                            {{groupInfo.name}}
                        </PowerSelect>
                    </form.element>
                </div>
                <div class="col-md-2">
                    <BsButton @size='sm' @type="primary" @onClick={{fn this.addGroup}}
                              @defaultText={{t 'users.add_group'}} />
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-12">
        <h3>{{t 'credentials.title'}}</h3>
        <div class="table-responsive">
            <table class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th class="col-md-1">#Id</th>
                        <th class="col-md-4">{{t 'alias'}}</th>
                        <th class="col-md-4">{{t 'type'}}</th>
                        <th>{{t 'schedule.remove_from_mapping'}}</th>
                    </tr>
                </thead>
                <tbody>
                {{#each this.args.mapping.credentials as |cred|}}
                    <tr>
                        <td>
                            <LinkToCredential @credential={{cred}} @text={{cred.id}} />
                        </td>
                        <td>
                            <LinkToCredential @credential={{cred}} @text={{cred.alias}} />
                        </td>
                        <td>
                            {{cred.type}}
                        </td>
                        <td>
                            <div class="pull-right">
                                <BsButton @size='xs' @icon='glyphicon glyphicon-remove' @type='danger'
                                          @defaultText={{t 'remove'}} @onClick={{fn this.removeCredential cred}} />
                            </div>
                        </td>
                    </tr>
                {{/each}}
                </tbody>
            </table>
        </div>
        <div class="row">
            <div class="pull-left col-md-4">
                <form.element @type="number" @label="Id" @value={{this.newCredential}} />
            </div>
            <div class="col-md-2">
                <BsButton @size='sm' @type="primary" @onClick={{fn this.addCredential this.cred}}
                          @defaultText={{t 'users.add_credential'}} />
            </div>
        </div>
    </div>

    <div class="col-md-12">
        <h3>{{t 'doors'}}</h3>
        <div class="table-responsive">
            <table class="table table-hover table-bordered">
                <thead>
                    <tr>
                        <th class="col-md-1">#Id</th>
                        <th class="col-md-6">{{t 'alias'}}</th>
                        <th>{{t 'schedule.remove_from_mapping'}}</th>
                    </tr>
                </thead>
                <tbody>
                {{#each this.args.mapping.doors as |door|}}
                    <tr>
                        <td>
                            <LinkTo @route='door' @model={{door.id}}>{{door.id}}</LinkTo>
                        </td>
                        <td>
                            <LinkTo @route='door' @model={{door.id}}>{{door.alias}}</LinkTo>
                        </td>
                        <td>
                            <div class="pull-right">
                                <BsButton @size='xs' @icon='glyphicon glyphicon-remove' @type='danger'
                                            @defaultText={{t 'remove'}} @onClick={{fn this.removeDoor door}} />
                            </div>
                        </td>
                    </tr>
                {{/each}}
                </tbody>
            </table>
        </div>

        <div>
            <div class="row">
                <div class="pull-left col-md-4">
                    <form.element @label="Door alias">
                        <PowerSelect @searchEnabled={{true}} @search={{this.searchDoor}} @selected={{this.newDoor}} @placeholder={{t "schedule.type_door"}} @onChange={{fn (mut this.newDoor)}} as |doorInfo|>
                            {{doorInfo.alias}}
                        </PowerSelect>
                    </form.element>
                </div>
                <div class="col-md-2">
                    <BsButton @size='sm' @type="primary" @onClick={{this.addDoor}} @defaultText={{t 'schedule.add_door'}} />
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-12">
        <h3>{{t 'zones'}}</h3>
        <div class="table-responsive">
            <table class="table table-hover table-bordered">
                <thead>
                    <tr>
                        <th class="col-md-1">#Id</th>
                        <th class="col-md-6">{{t 'alias'}}</th>
                        <th>{{t 'schedule.remove_from_mapping'}}</th>
                    </tr>
                </thead>
                <tbody>
                {{#each this.args.mapping.zones as |zone|}}
                    <tr>
                        <td>
                            <LinkTo @route='zone' @model={{zone.id}}>{{zone.id}}</LinkTo>
                        </td>
                        <td>
                            <LinkTo @route='zone' @model={{zone.id}}>{{zone.alias}}</LinkTo>
                        </td>
                        <td>
                            <div class="pull-right">
                                <BsButton @size='xs' @icon='glyphicon glyphicon-remove' @type='danger'
                                            @defaultText={{t 'remove'}} @onClick={{fn this.removeZone zone}} />
                            </div>
                        </td>
                    </tr>
                {{/each}}
                </tbody>
            </table>
        </div>

        <div>
            <div class="row">
                <div class="pull-left col-md-4">
                    <form.element @label="Zone alias">
                        <PowerSelect @searchEnabled={{true}} @search={{this.searchZone}} @selected={{this.newZone}} @placeholder={{t "schedule.type_zone"}} @onChange={{fn (mut this.newZone)}} as |zoneInfo|>
                            {{zoneInfo.alias}}
                        </PowerSelect>
                    </form.element>
                </div>
                <div class="col-md-2">
                    <BsButton @size='sm' @type="primary" @onClick={{this.addZone}} @defaultText={{t 'schedule.add_zone'}} />
                </div>
            </div>
        </div>
    </div>
</BsForm>
